<!-- based on https://github.com/rafrex/spa-github-pages/blob/gh-pages/404.html -->

<html>
  <body>
    <script type="text/javascript">
      const basename = '/adage-frontend';
      let {
        protocol,
        hostname,
        port,
        pathname,
        search,
        href: originalUrl
      } = location;

      let includeBasename = false;
      if (pathname.includes(basename)) {
        includeBasename = true;
        pathname = pathname.replace(basename, '');
      }

      const path = encodeURIComponent(pathname + search);
      const newUrl =
        protocol +
        '//' +
        hostname +
        (port ? ':' + port : '') +
        (includeBasename ? basename : '') +
        (path ? '/?path=' + path : '');

      console.log({ originalUrl, newUrl });

      location.replace(newUrl);
    </script>
  </body>
</html>
