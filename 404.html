<!-- based on https://github.com/rafrex/spa-github-pages/blob/gh-pages/404.html -->

<html>
  <body>
    <script type="text/javascript">
      const basename = '/adage-frontend';
      let { protocol, hostname, port, pathname, search } = window.location;

      pathname = pathname
        .split('/')
        .filter(
          (segment) => !basename || !basename.split('/').includes(segment)
        )
        .join('/');

      let params;
      if (pathname && search)
        params = window.btoa(JSON.stringify({ pathname, search }));

      const url =
        protocol +
        '//' +
        hostname +
        (port ? ':' + port : '') +
        basename +
        (params ? '/?path=' + params : '');

      window.location.replace(url);
    </script>
  </body>
</html>
